<script>
    // Function to get and parse the URL parameters
    function getLinksFromUrl() {
        const urlParams = new URLSearchParams(window.location.search);
        const links = urlParams.get('links');

        // Log the raw links parameter to see what's being received
        console.log('Raw links parameter:', links);

        // Check if links parameter exists and parse it as JSON
        if (links) {
            try {
                const parsedLinks = JSON.parse(decodeURIComponent(links));
                console.log('Parsed links:', parsedLinks);
                return parsedLinks;
            } catch (error) {
                console.error('Error parsing links:', error);
                return [];
            }
        } else {
            return [];
        }
    }

    // Function to render the links with corresponding logos
    function renderLinks(links) {
        const container = document.getElementById('links-container');
         
        // Clear the container before adding new links
        container.innerHTML = '';

        if (links.length === 0) {
            container.innerHTML = '<p>No links found.</p>';
            return;
        }

        links.forEach(link => {
            const linkItem = document.createElement('div');
            linkItem.classList.add('link-item');

            // Create the logo image
            const logo = document.createElement('img');
            logo.src = `logos/${link.platform}.png`; // Ensure the logo exists in the 'logos' folder
            logo.alt = `${link.platform} logo`;

            // Create the link element
            const linkElement = document.createElement('a');
            linkElement.href = link.url;
            linkElement.target = "_blank";
            linkElement.textContent = link.url;

            // Append logo and link to the link item
            linkItem.appendChild(logo);
            linkItem.appendChild(linkElement);

            // Append the link item to the container
            container.appendChild(linkItem);
        });
    }

    // Get links from the URL and render them
    const links = getLinksFromUrl();
    renderLinks(links);
</script>
